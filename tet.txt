#!/bin/ksh

USERLIST=""

if [ ! -f "$USERLIST" ]; then
    echo "ERROR: $USERLIST no such file!"
    exit 1
fi

while read u
do
    [ -z "$u" ] && continue
    [[ "$u" = \#* ]] && continue

    ts=$(lsuser -a time_last_login "$u" 2>/dev/null | awk -F= '{print $2}')

    if [ -z "$ts" ]; then
        echo "$u -> no such user!!"
    elif [ "$ts" -gt 0 ] 2>/dev/null; then
        data=$(perl -e "print scalar localtime($ts),\"\n\";")
        echo "$u -> $data"
    else
        echo "$u -> never logged! --skip!"
    fi
done < "$USERLIST"
